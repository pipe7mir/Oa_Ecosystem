/* ==========================================================
   ADMIN OASIS - SINCRONIZACIÓN VISUAL TOTAL (HOME FIX v4)
   ========================================================== */

/* 1. DEFINICIÓN DE VARIABLES (ROOT & SCOPED) */

/* GLOBAL (:root): Define el tema CLARO por defecto para que coincida con el HOME (Fondo Blanco) */
:root {
    /* --- VARIABLES LIGHT DEFAULT (Para Home y Global) --- */
    --admin-bg-base: #ffffff;
    --admin-bg-surface: #f8f9fa;

    --admin-text-primary: #3E0065;
    /* Deep Purple */
    --admin-text-secondary: #6a1b9a;

    --admin-gradient-start: #ffffff;
    --admin-gradient-end: #f4f4f4;

    --admin-glass-bg: rgba(0, 0, 0, 0.03);
    --admin-glass-border: rgba(0, 0, 0, 0.1);

    --admin-accent: #7b2cbf;
    /* Purple */
    --admin-accent-glow: #9d4e21;

    --admin-trama-dot: rgba(0, 0, 0, 0.05);
    /* Puntos grises */

    /* FUENTES */
    --font-titles: 'MoonRising', sans-serif;
}

/* --- ADMIN PANEL DEFAULT (DARK MODE) --- */
/* El panel de admin FUERZA el modo oscuro por defecto, independientemente del root */
.admin-dashboard-wrapper,
.oasis-modal-content,
.oasis-modal-overlay {
    --admin-bg-base: #10002b;
    --admin-bg-surface: rgba(36, 0, 70, 0.95);

    --admin-text-primary: #ffffff;
    --admin-text-secondary: rgba(255, 255, 255, 0.7);

    --admin-gradient-start: rgba(16, 0, 43, 0.9);
    --admin-gradient-end: rgba(36, 0, 70, 0.95);

    --admin-glass-bg: rgba(255, 255, 255, 0.05);
    --admin-glass-border: rgba(255, 255, 255, 0.1);

    --admin-trama-dot: rgba(123, 44, 191, 0.2);
    /* Puntos morados */
}

/* --- ADMIN PANEL TOGGLE (LIGHT MODE) --- */
/* Si el usuario activa el modo claro DENTRO del admin, volvemos a usar las variables claras */
[data-theme="light"] .admin-dashboard-wrapper,
[data-theme="light"] .oasis-modal-content,
[data-theme="light"] .oasis-modal-overlay {
    --admin-bg-base: #ffffff;
    --admin-bg-surface: #f8f9fa;
    --admin-text-primary: #3E0065;
    --admin-text-secondary: #6a1b9a;
    --admin-gradient-start: #ffffff;
    --admin-gradient-end: #f4f4f4;
    --admin-glass-bg: rgba(0, 0, 0, 0.03);
    --admin-glass-border: rgba(0, 0, 0, 0.1);
    --admin-trama-dot: rgba(0, 0, 0, 0.05);
}

/* 2. OVERRIDES CLASES BOOTSTRAP (Scoped) */
[data-theme="light"] .admin-dashboard-wrapper .btn-outline-light {
    color: var(--admin-accent) !important;
    border-color: var(--admin-accent) !important;
}

[data-theme="light"] .admin-dashboard-wrapper .btn-outline-light:hover {
    background-color: var(--admin-accent) !important;
    color: #ffffff !important;
}

/* 3. ESTRUCTURA PRINCIPAL */
.admin-dashboard-wrapper {
    min-height: 100vh;
    background: linear-gradient(to bottom,
            var(--admin-gradient-start) 0%,
            var(--admin-gradient-end) 100%) !important;
    padding-bottom: 50px;
    color: var(--admin-text-primary);
    transition: background 0.3s ease, color 0.3s ease;
}

/* FORZAR FUENTE Y COLOR EN ADMIN */
.admin-dashboard-wrapper h1,
.admin-dashboard-wrapper h2,
.admin-dashboard-wrapper h3,
.admin-dashboard-wrapper h4,
.admin-dashboard-wrapper h5,
.admin-dashboard-wrapper h6 {
    color: var(--admin-text-primary);
    font-family: var(--font-titles) !important;
}

.admin-dashboard-wrapper p,
.admin-dashboard-wrapper span,
.admin-dashboard-wrapper div {
    color: var(--admin-text-primary);
}

/* TRAMA DE FONDO */
.admin-trama {
    background-color: var(--admin-bg-base);
    background-image:
        radial-gradient(var(--admin-trama-dot) 1px, transparent 1px),
        radial-gradient(var(--admin-trama-dot) 1px, transparent 1px);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
    min-height: 100vh;
}

/* 4. COMPONENTES ESTILO OASIS */
.oasis-square-card {
    background: var(--admin-bg-surface) !important;
    width: 210px !important;
    height: 180px !important;
    border-radius: 24px !important;
    border-left: 6px solid var(--admin-accent) !important;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1),
        0 15px 15px rgba(0, 0, 0, 0.05) !important;
    transition: all 0.3s ease !important;
    color: var(--admin-text-primary) !important;
}

.oasis-square-card:hover {
    transform: translateY(-10px) scale(1.02) !important;
}

/* ICONOS: Usan variable de acento o primaria según el caso */
.oasis-square-card i {
    font-size: 4.5rem !important;
    color: var(--admin-accent) !important;
    /* Default PURPLE (Good for Home) */
    transition: color 0.3s ease;
}

/* ADMIN DARK MODE OVERRIDE FOR ICONS */
.admin-dashboard-wrapper .oasis-square-card i {
    color: #ffffff !important;
    /* Admin Start Dark: WHITE */
}

/* ADMIN LIGHT MODE RESTORE PURPLE */
[data-theme="light"] .admin-dashboard-wrapper .oasis-square-card i {
    color: var(--admin-accent) !important;
    /* Admin Toggle Light: PURPLE */
}

/* TEXTOS DENTRO DE CARDS */
.oasis-square-card h5,
.oasis-square-card p {
    color: var(--admin-text-primary) !important;
}

/* BOTONES */
.btn-oasis,
.btn-primary {
    background: linear-gradient(45deg, var(--admin-accent), var(--admin-accent-glow)) !important;
    border-radius: 50px !important;
    padding: 10px 28px !important;
    font-weight: 600 !important;
    color: #ffffff !important;
    /* Siempre blanco */
    border: none !important;
}

/* CONTENEDORES DE DETALLE */
.detail-card-body {
    background: var(--admin-bg-surface) !important;
    border-radius: 20px !important;
    border-left: 6px solid var(--admin-accent) !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;
    padding: 25px !important;
    color: var(--admin-text-primary);
}

.detail-card-body h2,
.detail-card-body h3,
.detail-card-body h4,
.detail-card-body p {
    color: var(--admin-text-primary) !important;
}

/* TABLAS */
.table {
    color: var(--admin-text-primary) !important;
}

.table thead th {
    color: var(--admin-text-primary) !important;
    font-family: var(--font-titles) !important;
    letter-spacing: 1px;
    text-transform: uppercase;
    font-size: 0.8rem;
    border-bottom: 2px solid rgba(123, 44, 191, 0.2);
}

.table tbody td {
    color: var(--admin-text-primary) !important;
    border-bottom: 1px solid var(--admin-glass-border);
}

/* GLASS PANEL & HEADER */
.glass-panel {
    background: var(--admin-glass-bg) !important;
    backdrop-filter: blur(12px) !important;
    border: 1px solid var(--admin-glass-border) !important;
    border-radius: 24px !important;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1) !important;
}

.glass-header {
    background: rgba(16, 0, 43, 0.6) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05) !important;
    color: #ffffff !important;
    /* Default Dark Header */
}

/* Light Mode Glass Header Override */
[data-theme="light"] .admin-dashboard-wrapper .glass-header {
    background: rgba(255, 255, 255, 0.9) !important;
    color: var(--admin-accent) !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
}

.form-label-glass {
    color: var(--admin-text-secondary) !important;
    font-weight: 500;
    margin-bottom: 8px;
}

.input-glass {
    background: rgba(0, 0, 0, 0.2) !important;
    /* Default dark */
    border: 1px solid var(--admin-glass-border) !important;
    color: var(--admin-text-primary) !important;
    border-radius: 12px !important;
    transition: all 0.3s ease;
}

[data-theme="light"] .input-glass {
    background: rgba(255, 255, 255, 0.5) !important;
    border: 1px solid rgba(0, 0, 0, 0.2) !important;
    color: #000000 !important;
}

.input-glass:focus {
    background: transparent !important;
    border-color: var(--admin-accent) !important;
    box-shadow: 0 0 0 3px rgba(123, 44, 191, 0.2) !important;
    color: var(--admin-text-primary) !important;
}

/* MODAL PERSONALIZADO */
.oasis-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    /* Always dark overlay */
    backdrop-filter: blur(5px);
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.oasis-modal-content {
    background: var(--admin-bg-surface) !important;
    border: 1px solid var(--admin-accent);
    border-radius: 20px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.3);
    color: var(--admin-text-primary);
    overflow: hidden;
}

.oasis-modal-header {
    padding: 20px;
    border-bottom: 1px solid var(--admin-glass-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.oasis-modal-body {
    padding: 30px 20px;
    text-align: center;
    font-size: 1.1rem;
    color: var(--admin-text-primary);
}

.oasis-modal-footer {
    padding: 20px;
    border-top: 1px solid var(--admin-glass-border);
    display: flex;
    justify-content: center;
    background: rgba(0, 0, 0, 0.05);
}

.btn-close-custom {
    background: transparent;
    border: none;
    color: var(--admin-text-primary);
    opacity: 0.7;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-close-custom:hover {
    opacity: 1;
    color: var(--admin-accent);
}

/* AUXILIARES */
.preview-container {
    perspective: 1000px;
}

.live-preview-box {
    background: linear-gradient(135deg, #240046 0%, #10002b 100%);
    border-radius: 16px;
    overflow: hidden;
    position: relative;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    aspect-ratio: 9/16;
    max-height: 600px;
    margin: 0 auto;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.live-preview-content {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 20px;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
    color: white;
}

.section-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(123, 44, 191, 0.5), transparent);
    margin: 2rem 0;
}

/* FILE UPLOAD & CHECKBOX */
.oasis-file-upload {
    position: relative;
    border: 2px dashed rgba(123, 44, 191, 0.5);
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.2);
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.oasis-file-upload:hover {
    border-color: var(--admin-accent);
    background: rgba(123, 44, 191, 0.1);
}

.oasis-file-upload i {
    font-size: 2rem;
    color: rgba(255, 255, 255, 0.5);
    margin-bottom: 10px;
    display: block;
}

.oasis-file-upload input[type="file"] {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
}

.form-check-input.oasis-check {
    background-color: transparent;
    border-color: rgba(123, 44, 191, 0.5);
    cursor: pointer;
}

.form-check-input.oasis-check:checked {
    background-color: var(--admin-accent);
    border-color: var(--admin-accent);
}